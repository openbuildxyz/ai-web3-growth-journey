# 🔮 Oracle-X

> **AI驱动的加密货币交易决策辅助系统**  
> 在你执行交易前，让AI为你把关。

---

## 📖 项目简介

Oracle-X 是一个创新的加密货币交易辅助工具，它在用户即将执行交易的关键时刻介入，通过AI多维度分析市场数据、技术指标和用户个人交易特征,提供专业的风险评估和决策建议。

### 💡 核心价值

- **🛡️ 决策拦截**：在交易执行前主动拦截，给予充分的分析时间
- **🔬 多维分析**：综合技术面、市场情绪、用户画像三个维度
- **⚡ 实时计算**：接入真实市场数据，使用专业技术分析库计算指标
- **🤖 AI驱动**：基于阶跃星辰(Step AI)大模型进行深度分析
- **💯 个性化**：根据用户历史交易数据提供针对性建议

---

## 🎯 主要功能

### 1. **实时市场监控**

- 接入 Binance API 获取实时行情数据
- 支持主流交易对（ETH/USDT, BTC/USDT, SOL/USDT）
- 实时显示价格、涨跌幅、成交量等关键指标

### 2. **专业技术分析**

基于 [technicalindicators](https://github.com/anandanand84/technicalindicators) 库计算：

- **RSI (相对强弱指标)**：识别超买超卖区域
- **MACD (指数平滑移动平均线)**：捕捉趋势转折点
- **布林带 (Bollinger Bands)**：评估价格波动区间
- **ATR (真实波幅)**：量化市场波动程度

### 3. **AI智能分析**

- **流式响应**：实时展示AI分析过程，增强信任感
- **结构化输出**：趋势分析 → 波动性评估 → 量价关系 → 市场情绪 → 风险评估
- **三级建议系统**：
  - 🟢 **建议执行**：风险可控，市场条件有利
  - 🟡 **建议观望**：信号不明确，建议等待
  - 🔴 **高风险警告**：存在显著风险，谨慎决策

### 4. **用户画像分析**

- 分析用户历史交易数据
- 统计做多/做空胜率
- 识别交易风格（日内交易/波段交易/长线持仓）
- 个性化风险提示

### 5. **Chrome 扩展**

- 浮动侧边栏设计，不干扰正常交易界面
- 与主应用实时同步分析数据
- 支持多标签页并行使用

---

## 🏗️ 技术架构

### 前端技术栈

- **框架**：Next.js 14.2.5（App Router）
- **UI**：React 18.3 + TypeScript 5.4
- **图表**：lightweight-charts 5.1
- **样式**：CSS Modules

### 后端技术栈

- **Runtime**：Vercel Edge Runtime
- **API**：Next.js API Routes
- **技术分析**：technicalindicators 3.1
- **AI 模型**：阶跃星辰 (Step AI)

### 数据流架构

```
用户界面
   ↓
前端 (React) → 监听交易操作
   ↓
调用 Binance API → 获取K线数据
   ↓
POST /api/analyze → 后端API
   ↓
├─ 参数校验
├─ 技术指标计算 (technicalindicators)
├─ 数据预处理与压缩
├─ 构造 AI Prompt
└─ 调用 Step AI API (流式)
   ↓
SSE 流式响应 → 前端实时显示
   ↓
用户查看分析结果 → 做出最终决策
```

---

## 🚀 快速开始

### 环境要求

- Node.js 20+
- npm 或 pnpm

### 安装步骤

1. **克隆项目**

```bash
git clone <repository-url>
cd tradebefore
```

2. **安装依赖**

```bash
npm install
```

3. **配置环境变量**

创建 `.env.local` 文件：

```bash
# 阶跃星辰 API Key
STEP_API_KEY=your_step_api_key_here

# AI 模型配置（可选）
AI_MODEL=step-1-8k
AI_BASE_URL=https://api.stepfun.com/v1
AI_TEMPERATURE=0.3
AI_MAX_TOKENS=1000
```

4. **启动开发服务器**

```bash
npm run dev
```

访问 `http://localhost:3000` 查看应用。

### 使用 Chrome 扩展

1. 打开 Chrome 浏览器，进入 `chrome://extensions/`
2. 开启"开发者模式"
3. 点击"加载已解压的扩展程序"
4. 选择项目中的 `extension` 文件夹
5. 扩展安装成功后，点击工具栏图标打开侧边栏

---

## 📝 使用指南

### Demo 演示流程（推荐40秒）

**第一幕（10秒）** - 展示实时数据  
打开页面，展示实时跳动的价格和技术指标卡片

**第二幕（5秒）** - 介绍用户画像  
指出用户画像卡片，说明系统已分析历史交易数据

**第三幕（5秒）** - 触发分析  
点击做多/做空按钮，触发AI拦截

**第四幕（15-20秒）** - AI分析过程  
保持安静，让评委阅读流式输出的分析文本

**第五幕（5秒）** - 展示结论  
红色/黄色/绿色警告Badge出现，说明分析结果

---

## 🔐 安全特性

- ✅ API Key 仅存储在服务端，前端无法访问
- ✅ 所有市场数据来自官方 Binance API
- ✅ AI Prompt 防注入设计
- ✅ 参数白名单校验
- ✅ 请求大小限制（防止超大 payload）

---

## 📊 API 文档

### `POST /api/analyze`

**请求示例：**

```json
{
  "symbol": "ETHUSDT",
  "direction": "LONG",
  "marketData": {
    "price": "3842.50",
    "change24h": "-2.35",
    "volume": "125000",
    "high24h": "3920.00",
    "low24h": "3790.00",
    "fearGreedIndex": 25,
    "fearGreedLabel": "Extreme Fear",
    "klines": [...]
  }
}
```

**响应格式：** SSE（Server-Sent Events）流式响应

```
data: {"content": "【趋势分析】\n当前ETH处于..."}
data: {"content": "下降通道中..."}
...
data: [DONE]
```

---

## 🌟 未来展望

### 短期规划（3-6个月）

#### 1. **社交情绪分析**

- 集成 Twitter/X 情绪分析
- 实时抓取加密货币相关推文
- 使用 NLP 分析市场情绪倾向
- 识别关键意见领袖(KOL)动向

#### 2. **链上数据集成**

- 大额转账监控（巨鲸动向）
- 交易所资金流入流出分析
- Gas费趋势分析（网络活跃度）
- 智能合约交互数据

#### 3. **用户系统完善**

- 钱包连接（MetaMask / WalletConnect）
- 链上交易历史自动分析
- 个人交易日志系统
- 历史分析结果存档

#### 4. **交易执行能力**

- 集成 DEX 聚合器（1inch / 0x）
- 一键执行推荐交易
- 止盈止损自动设置
- 仓位管理建议

### 中期规划（6-12个月）

#### 5. **多链支持**

- 支持 Solana / Arbitrum / Polygon 等链
- 跨链套利机会识别
- 多链资产统一管理

#### 6. **高级策略**

- 网格交易策略推荐
- DCA（定投）方案生成
- 对冲策略建议
- 投资组合优化

#### 7. **社区功能**

- 分享分析结果到社区
- 跟单优秀交易者
- 策略回测对比
- 排行榜系统

#### 8. **AI 能力升级**

- 多模型集成（GPT-4 / Claude / Gemini）
- 模型输出结果对比
- 强化学习优化推荐准确率
- 自适应 Prompt 调优

### 长期愿景（12个月+）

#### 9. **机构级功能**

- 大额交易影响分析
- 流动性评估
- 滑点预测
- 市场深度分析

#### 10. **去中心化演进**

- 将用户数据存储在 IPFS
- 使用 DAO 治理模型参数
- 代币化激励机制
- 开放 API 供第三方集成

#### 11. **移动端应用**

- iOS / Android 原生应用
- 推送通知（价格预警、高风险提示）
- 移动端快速决策界面
- 语音交互支持

#### 12. **教育与洞察**

- AI 生成交易复盘报告
- 个性化学习路径推荐
- 市场趋势周报
- 知识图谱构建

---

## 🎨 设计哲学

### 核心原则

1. **透明性**：让用户看到AI的思考过程
2. **可解释性**：每个建议都有明确的数据支撑
3. **用户自主**：AI是顾问，不是决策者
4. **专业性**：使用行业标准指标，不造概念

### UI/UX 优先级

- **P0**：分析弹窗（流式文本 + 结论 Badge）
- **P1**：交易触发按钮 + 实时价格
- **P2**：技术指标卡片 + 用户画像
- **P3**：深色主题 + 品牌视觉
- **P4**：交易对切换 + 价格动画

---

## 🤝 贡献指南

欢迎贡献代码！请遵循以下流程：

1. Fork 本仓库
2. 创建特性分支 (`git checkout -b feature/AmazingFeature`)
3. 提交更改 (`git commit -m 'Add some AmazingFeature'`)
4. 推送到分支 (`git push origin feature/AmazingFeature`)
5. 开启 Pull Request

---

## 📄 许可证

本项目采用 MIT 许可证。详见 [LICENSE](LICENSE) 文件。

---

**⚠️ 风险提示**

加密货币交易具有高风险性。Oracle-X 提供的分析仅供参考，不构成投资建议。请在充分了解风险的前提下进行交易决策。

---

<div align="center">
Made with ❤️ for smarter crypto trading
</div>

# Environment variables declared in this file are NOT automatically loaded by Prisma.
# Please add `import "dotenv/config";` to your `prisma.config.ts` file, or use the Prisma CLI with Bun
# to load environment variables from .env files: https://pris.ly/prisma-config-env-vars.

# Prisma supports the native connection string format for PostgreSQL, MySQL, SQLite, SQL Server, MongoDB and CockroachDB.
# See the documentation for all the connection string options: https://pris.ly/d/connection-strings

# The following `prisma+postgres` URL is similar to the URL produced by running a local Prisma Postgres
# server with the `prisma dev` CLI command, when not choosing any non-default ports or settings. The API key, unlike the
# one found in a remote Prisma Postgres URL, does not contain any sensitive information.

DATABASE_URL="postgresql://postgres:!agentmarket123@learnbase.ccv8mg2cu3bo.us-east-1.rds.amazonaws.com:5432/postgres"

# 数据库 CA 证书路径（用于 SSL 校验）
DB_SSL_CA_PATH="certs/car/global.pem"
# 是否校验证书（开发环境可设为 false，生产建议 true）
DB_SSL_REJECT_UNAUTHORIZED=false

# 服务端口
PORT=8001
# 平台对外访问地址（用于 Agent 回调）
PLATFORM_BASE_URL="http://localhost:8001"

# JWT 配置
JWT_SECRET="dev-secret"
JWT_EXPIRES_IN="1d"

# 登录挑战 nonce 过期时间（毫秒）
AUTH_NONCE_TTL_MS=300000

# Agent 调用超时时间（毫秒）
AGENT_INVOKE_TIMEOUT_MS=30000
# Agent JWT 鉴权配置
AGENT_JWT_SECRET="agent-secret"
AGENT_JWT_EXPIRES_IN="5m"

# 链上 RPC 与同步配置
CHAIN_RPC_URL="https://rpc.example.org"
CHAIN_ID=1
CHAIN_SYNC_START_BLOCK=1
CHAIN_SYNC_INTERVAL_MS=8000

# 合约地址配置
TASK_MANAGER_ADDRESS="0xe13f23df9db64611eedc362392bde5f2ceb9d578"
ARBITRATION_ADDRESS="0xbcd33f9ee5101bd6b8045a7f53f3b3f58f36a5dd"
ESCROW_VAULT_ADDRESS="0xe11cd99c80a9699bd7567195297c29a3f04f58cf"
TOKEN_EXCHANGE_ADDRESS="0x4004bfd7e3f173525a5cc79e271e6fc69174621e"

# 调用外部Agent API的签名密钥，生产环境由后端生成后直接存入AWS的secretManager
AGENT_TEST_SECRET="ag_sk_dev_aabbccddeeffgg"

# AWS Secrets Manager 配置（生产环境读取 Agent 密钥）
AWS_REGION=""
# Secret 名称前缀，最终名为 AGENT_{agentId}_SECRET
AGENT_SECRET_PREFIX="AGENT_"

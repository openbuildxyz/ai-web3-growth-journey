<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>AI NFT Marketplace</title>
	<meta name="description"
		content="Generate AI-powered NFTs and trade them on the blockchain. The future of digital art creation in a cyberpunk metaverse.">
	<meta name="keywords" content="AI, NFT, blockchain, cyberpunk, digital art, ethereum, marketplace">

	<!-- Fonts -->
	<link
		href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;400;500;600;700&display=swap"
		rel="stylesheet">

	<!-- Ethers.js -->
	<script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/5.7.2/ethers.umd.min.js"></script>

	<style>
		:root {
			/* Cyberpunk Color Palette */
			--cyber-primary: 0 100% 50%;
			/* Electric Cyan */
			--cyber-secondary: 322 100% 60%;
			/* Hot Pink */
			--cyber-accent: 270 100% 70%;
			/* Purple */
			--cyber-background: 240 10% 3.9%;
			/* Deep Dark */
			--cyber-surface: 240 10% 8%;
			/* Dark Gray */
			--cyber-muted: 240 5% 65%;
			/* Gray */
			--cyber-success: 142 76% 36%;
			/* Green */
			--cyber-warning: 48 96% 53%;
			/* Yellow */
			--cyber-error: 0 84% 60%;
			/* Red */

			/* Text Colors */
			--text-primary: 0 0% 98%;
			--text-secondary: 240 5% 65%;
			--text-muted: 240 3.8% 46.1%;

			/* Gradients */
			--gradient-primary: linear-gradient(135deg, hsl(var(--cyber-primary)), hsl(var(--cyber-secondary)));
			--gradient-cyber: linear-gradient(135deg, hsl(var(--cyber-primary) / 0.3), hsl(var(--cyber-secondary) / 0.3));
			--gradient-dark: linear-gradient(180deg, hsl(var(--cyber-background)), hsl(240 10% 2%));

			/* Shadows & Effects */
			--shadow-neon: 0 0 20px hsl(var(--cyber-primary) / 0.5);
			--shadow-glow: 0 0 40px hsl(var(--cyber-primary) / 0.3);
			--shadow-card: 0 10px 30px -10px hsl(var(--cyber-background) / 0.5);
		}

		* {
			margin: 0;
			padding: 0;
			box-sizing: border-box;
		}

		body {
			font-family: 'Rajdhani', sans-serif;
			background: hsl(var(--cyber-background));
			color: hsl(var(--text-primary));
			line-height: 1.6;
			overflow-x: hidden;
		}

		.cyber-grid {
			background-image:
				linear-gradient(rgba(0, 255, 255, 0.03) 1px, transparent 1px),
				linear-gradient(90deg, rgba(0, 255, 255, 0.03) 1px, transparent 1px);
			background-size: 50px 50px;
		}

		.font-cyber {
			font-family: 'Orbitron', monospace;
		}

		.font-tech {
			font-family: 'Rajdhani', sans-serif;
			font-weight: 400;
		}

		/* Gradient Text */
		.gradient-text {
			background: var(--gradient-primary);
			-webkit-background-clip: text;
			background-clip: text;
			-webkit-text-fill-color: transparent;
		}

		/* Cyber Glow Effect */
		.cyber-glow {
			text-shadow: 0 0 10px hsl(var(--cyber-primary) / 0.8);
		}

		/* Neon Pulse Animation */
		.neon-pulse {
			animation: neon-pulse 2s ease-in-out infinite alternate;
		}

		@keyframes neon-pulse {
			from {
				box-shadow: 0 0 20px hsl(var(--cyber-primary) / 0.5);
			}

			to {
				box-shadow: 0 0 30px hsl(var(--cyber-primary) / 0.8);
			}
		}

		/* Glitch Effect */
		@keyframes glitch {
			0% {
				transform: translate(0);
			}

			20% {
				transform: translate(-2px, 2px);
			}

			40% {
				transform: translate(-2px, -2px);
			}

			60% {
				transform: translate(2px, 2px);
			}

			80% {
				transform: translate(2px, -2px);
			}

			100% {
				transform: translate(0);
			}
		}

		.glitch:hover {
			animation: glitch 0.3s ease-in-out;
		}

		/* Container */
		.container {
			max-width: 1200px;
			margin: 0 auto;
			padding: 0 24px;
		}

		/* Header */
		.header {
			display: flex;
			justify-content: space-between;
			align-items: center;
			padding: 32px 0;
			flex-wrap: wrap;
			gap: 24px;
		}

		.title {
			font-size: 3rem;
			font-weight: 900;
			text-align: center;
		}

		.subtitle {
			font-size: 1.125rem;
			color: hsl(var(--text-secondary));
			margin-top: 8px;
		}

		@media (min-width: 1024px) {
			.title {
				font-size: 3.75rem;
				text-align: left;
			}
		}

		/* Buttons */
		.btn {
			display: inline-flex;
			align-items: center;
			justify-content: center;
			padding: 12px 24px;
			border-radius: 8px;
			font-weight: 600;
			font-size: 14px;
			transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
			cursor: pointer;
			border: none;
			text-decoration: none;
			font-family: 'Rajdhani', sans-serif;
		}

		.btn-primary {
			background: var(--gradient-primary);
			color: white;
			box-shadow: var(--shadow-glow);
		}

		.btn-primary:hover {
			transform: translateY(-2px);
			box-shadow: var(--shadow-neon);
		}

		.btn-secondary {
			background: hsl(var(--cyber-surface));
			color: hsl(var(--cyber-primary));
			border: 1px solid hsl(var(--cyber-primary) / 0.3);
		}

		.btn-secondary:hover {
			background: hsl(var(--cyber-primary) / 0.1);
			border-color: hsl(var(--cyber-primary));
		}

		.btn:disabled {
			opacity: 0.5;
			cursor: not-allowed;
			transform: none !important;
		}

		/* Cards */
		.card {
			background: hsl(var(--cyber-surface) / 0.5);
			backdrop-filter: blur(20px);
			border: 1px solid hsl(var(--cyber-primary) / 0.2);
			border-radius: 12px;
			padding: 24px;
			box-shadow: var(--shadow-card);
		}

		.hero-card {
			position: relative;
			overflow: hidden;
			background: hsl(var(--cyber-surface) / 0.3);
			backdrop-filter: blur(40px);
		}

		.hero-bg {
			position: absolute;
			inset: 0;
			background: var(--gradient-cyber);
			opacity: 0.8;
		}

		.hero-content {
			position: relative;
			z-index: 10;
			text-align: center;
			padding: 48px;
		}

		.hero-title {
			font-size: 2rem;
			font-weight: 700;
			color: hsl(var(--cyber-primary));
			margin-bottom: 24px;
		}

		@media (min-width: 1024px) {
			.hero-title {
				font-size: 3rem;
			}
		}

		.hero-description {
			font-size: 1.25rem;
			color: hsl(var(--text-primary) / 0.8);
			max-width: 512px;
			margin: 0 auto 48px;
			line-height: 1.7;
		}

		/* Features Grid */
		.features-grid {
			display: grid;
			grid-template-columns: repeat(2, 1fr);
			gap: 24px;
			margin-top: 48px;
		}

		@media (min-width: 1024px) {
			.features-grid {
				grid-template-columns: repeat(4, 1fr);
			}
		}

		.feature-item {
			text-align: center;
			transition: all 0.3s ease;
		}

		.feature-item:hover .feature-icon {
			box-shadow: var(--shadow-neon);
		}

		.feature-icon {
			width: 64px;
			height: 64px;
			margin: 0 auto 16px;
			background: hsl(var(--cyber-primary) / 0.1);
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			border: 1px solid hsl(var(--cyber-primary) / 0.3);
			transition: all 0.3s ease;
		}

		.feature-label {
			font-weight: 700;
			color: hsl(var(--cyber-primary));
			font-size: 14px;
			margin-bottom: 4px;
		}

		.feature-desc {
			font-size: 12px;
			color: hsl(var(--text-secondary));
		}

		/* Grid Layout */
		.main-grid {
			display: grid;
			grid-template-columns: 1fr;
			gap: 32px;
			margin: 48px 0;
		}

		@media (min-width: 1024px) {
			.main-grid {
				grid-template-columns: repeat(2, 1fr);
			}
		}

		/* Forms */
		.form-group {
			margin-bottom: 16px;
		}

		.form-label {
			display: block;
			font-weight: 600;
			color: hsl(var(--text-primary));
			margin-bottom: 8px;
			font-size: 14px;
		}

		.form-input,
		.form-textarea {
			width: 100%;
			padding: 12px 16px;
			background: hsl(var(--cyber-surface));
			border: 1px solid hsl(var(--cyber-primary) / 0.3);
			border-radius: 8px;
			color: hsl(var(--text-primary));
			font-family: 'Rajdhani', sans-serif;
			font-size: 14px;
			transition: all 0.3s ease;
		}

		.form-textarea {
			resize: vertical;
			min-height: 100px;
		}

		.form-input:focus,
		.form-textarea:focus {
			outline: none;
			border-color: hsl(var(--cyber-primary));
			box-shadow: 0 0 10px hsl(var(--cyber-primary) / 0.3);
		}

		.form-input::placeholder,
		.form-textarea::placeholder {
			color: hsl(var(--text-muted));
		}

		/* Image Preview */
		.image-preview {
			display: flex;
			flex-direction: column;
			align-items: center;
			justify-content: center;
			background: hsl(var(--cyber-surface) / 0.5);
			border-radius: 12px;
			padding: 24px;
			min-height: 300px;
			border: 1px solid hsl(var(--cyber-primary) / 0.2);
		}

		.preview-image {
			max-width: 100%;
			height: auto;
			border-radius: 8px;
			box-shadow: var(--shadow-card);
		}

		/* Loading Spinner */
		.loading-spinner {
			display: flex;
			flex-direction: column;
			align-items: center;
			gap: 16px;
		}

		.spinner {
			width: 48px;
			height: 48px;
			border: 4px solid hsl(var(--cyber-primary) / 0.2);
			border-top: 4px solid hsl(var(--cyber-primary));
			border-radius: 50%;
			animation: spin 1s linear infinite;
		}

		@keyframes spin {
			0% {
				transform: rotate(0deg);
			}

			100% {
				transform: rotate(360deg);
			}
		}

		.loading-text {
			color: hsl(var(--cyber-primary));
			font-weight: 500;
		}

		/* Status Panel */
		.status-panel {
			background: hsl(var(--cyber-surface) / 0.2);
			backdrop-filter: blur(10px);
			border: 1px solid hsl(var(--text-muted) / 0.3);
		}

		.status-item {
			display: flex;
			justify-content: space-between;
			align-items: center;
			margin-bottom: 12px;
		}

		.status-item:last-child {
			margin-bottom: 0;
		}

		.status-label {
			font-size: 14px;
			color: hsl(var(--text-secondary));
		}

		.status-indicator {
			display: flex;
			align-items: center;
			gap: 8px;
		}

		.status-dot {
			width: 8px;
			height: 8px;
			border-radius: 50%;
			background: hsl(var(--cyber-primary));
			animation: pulse 2s infinite;
		}

		@keyframes pulse {

			0%,
			100% {
				opacity: 1;
			}

			50% {
				opacity: 0.5;
			}
		}

		.status-text {
			font-size: 14px;
			color: hsl(var(--cyber-primary));
		}

		/* Message Box */
		.message-box {
			padding: 16px 24px;
			background: hsl(var(--cyber-surface) / 0.5);
			border-radius: 8px;
			text-align: center;
			margin-top: 24px;
			border-left: 4px solid hsl(var(--cyber-primary));
		}

		.message-error {
			border-left-color: hsl(var(--cyber-error));
			color: hsl(var(--cyber-error));
		}

		/* Access Required */
		.access-card {
			max-width: 400px;
			margin: 96px auto;
			text-align: center;
			background: hsl(var(--cyber-surface) / 0.3);
			backdrop-filter: blur(40px);
			border: 1px solid hsl(var(--text-muted) / 0.3);
		}

		.access-icon {
			width: 80px;
			height: 80px;
			margin: 0 auto 24px;
			background: hsl(var(--cyber-primary) / 0.1);
			border-radius: 50%;
			display: flex;
			align-items: center;
			justify-content: center;
			border: 1px solid hsl(var(--cyber-primary) / 0.3);
		}

		.access-title {
			font-size: 1.25rem;
			color: hsl(var(--cyber-primary));
			margin-bottom: 16px;
			font-weight: 700;
		}

		.access-description {
			color: hsl(var(--text-secondary));
			margin-bottom: 24px;
		}

		/* Footer */
		.footer {
			margin-top: 96px;
			padding: 48px 0;
			border-top: 1px solid hsl(var(--cyber-primary) / 0.1);
			text-align: center;
		}

		.footer-text {
			color: hsl(var(--text-secondary));
			font-size: 14px;
		}

		/* Background Effects */
		.bg-effects {
			position: fixed;
			inset: 0;
			pointer-events: none;
			z-index: -1;
		}

		.bg-gradient {
			position: absolute;
			inset: 0;
			background: var(--gradient-dark);
			opacity: 0.9;
		}

		.bg-orb-1 {
			position: absolute;
			top: 0;
			left: 25%;
			width: 384px;
			height: 384px;
			background: hsl(var(--cyber-primary) / 0.1);
			border-radius: 50%;
			filter: blur(60px);
			animation: pulse 4s infinite;
		}

		.bg-orb-2 {
			position: absolute;
			bottom: 0;
			right: 25%;
			width: 384px;
			height: 384px;
			background: hsl(var(--cyber-secondary) / 0.1);
			border-radius: 50%;
			filter: blur(60px);
			animation: pulse 4s infinite 2s;
		}

		/* Utility Classes */
		.hidden {
			display: none !important;
		}

		.space-y-4>*+* {
			margin-top: 16px;
		}

		.space-y-6>*+* {
			margin-top: 24px;
		}

		.text-center {
			text-align: center;
		}

		.relative {
			position: relative;
		}

		.z-10 {
			z-index: 10;
		}

		.w-full {
			width: 100%;
		}

		.mt-4 {
			margin-top: 16px;
		}

		.mb-4 {
			margin-bottom: 16px;
		}

		.mb-6 {
			margin-bottom: 24px;
		}
	</style>
</head>

<body>
	<div class="cyber-grid relative overflow-hidden">
		<!-- Background Effects -->
		<div class="bg-effects">
			<div class="bg-gradient"></div>
			<div class="bg-orb-1"></div>
			<div class="bg-orb-2"></div>
		</div>

		<div class="relative z-10">
			<!-- Header -->
			<header class="container">
				<div class="header">
					<div>
						<h1 class="title font-cyber gradient-text cyber-glow">
							AI NFT MARKETPLACE
						</h1>
						<p class="subtitle font-tech">
							Generate â€¢ Mint â€¢ Trade in the Metaverse
						</p>
					</div>
					<div id="walletSection">
						<button id="connectBtn" class="btn btn-primary">
							Connect Wallet
						</button>
						<div id="accountInfo" class="hidden">
							<div class="btn btn-secondary" id="accountDisplay"></div>
						</div>
					</div>
				</div>
			</header>

			<!-- Hero Section -->
			<section class="container">
				<div class="card hero-card">
					<div class="hero-bg"></div>
					<div class="hero-content">
						<h2 class="hero-title font-cyber">
							Create AI-Powered NFTs
						</h2>
						<p class="hero-description font-tech">
							Harness the power of AI to generate unique digital art, mint it as NFTs,
							and trade on the blockchain marketplace. The future of digital creativity is here.
						</p>

						<div class="features-grid">
							<div class="feature-item">
								<div class="feature-icon">
									<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor"
										stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
										style="color: hsl(var(--cyber-primary))">
										<polygon points="13,2 3,14 12,14 11,22 21,10 12,10"></polygon>
									</svg>
								</div>
								<h3 class="feature-label font-cyber">AI Generation</h3>
								<p class="feature-desc font-tech">Powered by advanced AI</p>
							</div>
							<div class="feature-item">
								<div class="feature-icon">
									<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor"
										stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
										style="color: hsl(var(--cyber-primary))">
										<rect width="16" height="16" x="4" y="4" rx="2"></rect>
										<rect width="6" height="6" x="9" y="9" rx="1"></rect>
										<path d="m15 2-3 3-3-3"></path>
										<path d="m17 6 3 3-3 3"></path>
										<path d="m9 18-3-3 3-3"></path>
										<path d="m7 22 3-3 3 3"></path>
									</svg>
								</div>
								<h3 class="feature-label font-cyber">Blockchain</h3>
								<p class="feature-desc font-tech">Ethereum smart contracts</p>
							</div>
							<div class="feature-item">
								<div class="feature-icon">
									<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor"
										stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
										style="color: hsl(var(--cyber-primary))">
										<circle cx="8" cy="8" r="6"></circle>
										<path d="m18.09 10.37a6 6 0 1 1-10.37 0"></path>
										<path d="m12 2a6 6 0 0 0-6 6c0 1 2 3 6 3s6-2 6-3a6 6 0 0 0-6-6z"></path>
									</svg>
								</div>
								<h3 class="feature-label font-cyber">NFT Minting</h3>
								<p class="feature-desc font-tech">ERC-721 standard</p>
							</div>
							<div class="feature-item">
								<div class="feature-icon">
									<svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor"
										stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
										style="color: hsl(var(--cyber-primary))">
										<circle cx="12" cy="12" r="10"></circle>
										<path d="m12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20"></path>
										<path d="M2 12h20"></path>
									</svg>
								</div>
								<h3 class="feature-label font-cyber">IPFS Storage</h3>
								<p class="feature-desc font-tech">Decentralized hosting</p>
							</div>
						</div>
					</div>
				</div>
			</section>

			<!-- Main Application -->
			<div id="mainApp" class="hidden">
				<section class="container">
					<div class="main-grid">
						<!-- Left Column - Image Generation -->
						<div class="space-y-6">
							<div class="card">
								<h3 class="form-label font-cyber"
									style="color: hsl(var(--cyber-primary)); font-size: 1.5rem; margin-bottom: 24px;">
									AI Art Generator
								</h3>
								<div class="form-group">
									<label class="form-label">Describe Your Vision</label>
									<textarea id="promptInput" class="form-textarea"
										placeholder="A futuristic cybernetic sadhu meditating in Greater Noida with neon lights reflecting off chrome surfaces..."
										rows="4"></textarea>
								</div>
								<button id="generateBtn" class="btn btn-primary w-full">
									Generate AI Art
								</button>
							</div>
						</div>

						<!-- Right Column - Image Preview & Minting -->
						<div class="space-y-6">
							<div class="card">
								<h3 class="form-label font-cyber"
									style="color: hsl(var(--cyber-primary)); font-size: 1.5rem; margin-bottom: 24px;">
									Preview & Mint
								</h3>
								<div class="image-preview">
									<div id="loadingSpinner" class="loading-spinner hidden">
										<div class="spinner"></div>
										<p class="loading-text" id="loadingMessage">Generating AI image...</p>
									</div>
									<img id="generatedImage" class="preview-image hidden" alt="Generated NFT">
									<p id="placeholderText" class="text-center"
										style="color: hsl(var(--text-secondary));">
										Your AI-generated artwork will appear here
									</p>
								</div>

								<div id="mintingSection" class="hidden space-y-4 mt-4">
									<div class="form-group">
										<label class="form-label">Listing Price (ETH)</label>
										<input type="number" id="priceInput" class="form-input" placeholder="0.01"
											step="0.001" min="0">
									</div>
									<button id="mintBtn" class="btn btn-primary w-full">
										Mint & List NFT
									</button>
								</div>
							</div>

							<!-- Status Panel -->
							<div class="card status-panel">
								<h3 class="form-label font-cyber mb-4">System Status</h3>
								<div class="space-y-4">
									<div class="status-item">
										<span class="status-label font-tech">Wallet</span>
										<div class="status-indicator">
											<div class="status-dot"></div>
											<span class="status-text">Connected</span>
										</div>
									</div>
									<div class="status-item">
										<span class="status-label font-tech">AI Engine</span>
										<div class="status-indicator">
											<div class="status-dot"></div>
											<span class="status-text">Online</span>
										</div>
									</div>
									<div class="status-item">
										<span class="status-label font-tech">Blockchain</span>
										<div class="status-indicator">
											<div class="status-dot"></div>
											<span class="status-text">Ethereum</span>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>
				</section>
			</div>

			<!-- Access Required -->
			<div id="accessRequired">
				<section class="container">
					<div class="card access-card">
						<div class="access-icon neon-pulse">
							<svg width="40" height="40" viewBox="0 0 24 24" fill="none" stroke="currentColor"
								stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
								style="color: hsl(var(--cyber-primary))">
								<polygon points="13,2 3,14 12,14 11,22 21,10 12,10"></polygon>
							</svg>
						</div>
						<h3 class="access-title font-cyber">
							Access Required
						</h3>
						<p class="access-description font-tech">
							Connect your MetaMask wallet to start creating and minting AI-powered NFTs.
						</p>
					</div>
				</section>
			</div>

			<!-- Message Box -->
			<div id="messageBox" class="hidden container">
				<div class="message-box">
					<p id="messageText"></p>
				</div>
			</div>

			<!-- Footer -->
			<footer class="footer container">
				<p class="footer-text font-tech">
					Â© 2025 AI NFT MARKETPLACE â€¢ Powered by TANU SOMANI
				</p>
			</footer>
		</div>
	</div>

	<script>
		// Contract Configuration
		const AINFT_ADDRESS = "0x6491235b004fd31a78377beb10b3a074955b530a";
		const MARKETPLACE_ADDRESS = "0xcdef834a04e903c61041dfb6ce5f9c50b76cff73";
		const AINFT_ABI = [
			{
				"inputs": [],
				"stateMutability": "nonpayable",
				"type": "constructor"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "sender",
						"type": "address"
					},
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					},
					{
						"internalType": "address",
						"name": "owner",
						"type": "address"
					}
				],
				"name": "ERC721IncorrectOwner",
				"type": "error"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "operator",
						"type": "address"
					},
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					}
				],
				"name": "ERC721InsufficientApproval",
				"type": "error"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "approver",
						"type": "address"
					}
				],
				"name": "ERC721InvalidApprover",
				"type": "error"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "operator",
						"type": "address"
					}
				],
				"name": "ERC721InvalidOperator",
				"type": "error"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "owner",
						"type": "address"
					}
				],
				"name": "ERC721InvalidOwner",
				"type": "error"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "receiver",
						"type": "address"
					}
				],
				"name": "ERC721InvalidReceiver",
				"type": "error"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "sender",
						"type": "address"
					}
				],
				"name": "ERC721InvalidSender",
				"type": "error"
			},
			{
				"inputs": [
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					}
				],
				"name": "ERC721NonexistentToken",
				"type": "error"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "owner",
						"type": "address"
					}
				],
				"name": "OwnableInvalidOwner",
				"type": "error"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "account",
						"type": "address"
					}
				],
				"name": "OwnableUnauthorizedAccount",
				"type": "error"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": true,
						"internalType": "address",
						"name": "owner",
						"type": "address"
					},
					{
						"indexed": true,
						"internalType": "address",
						"name": "approved",
						"type": "address"
					},
					{
						"indexed": true,
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					}
				],
				"name": "Approval",
				"type": "event"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": true,
						"internalType": "address",
						"name": "owner",
						"type": "address"
					},
					{
						"indexed": true,
						"internalType": "address",
						"name": "operator",
						"type": "address"
					},
					{
						"indexed": false,
						"internalType": "bool",
						"name": "approved",
						"type": "bool"
					}
				],
				"name": "ApprovalForAll",
				"type": "event"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": false,
						"internalType": "uint256",
						"name": "_fromTokenId",
						"type": "uint256"
					},
					{
						"indexed": false,
						"internalType": "uint256",
						"name": "_toTokenId",
						"type": "uint256"
					}
				],
				"name": "BatchMetadataUpdate",
				"type": "event"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": false,
						"internalType": "uint256",
						"name": "_tokenId",
						"type": "uint256"
					}
				],
				"name": "MetadataUpdate",
				"type": "event"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": true,
						"internalType": "address",
						"name": "owner",
						"type": "address"
					},
					{
						"indexed": true,
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					},
					{
						"indexed": false,
						"internalType": "string",
						"name": "tokenURI",
						"type": "string"
					}
				],
				"name": "Minted",
				"type": "event"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": true,
						"internalType": "address",
						"name": "previousOwner",
						"type": "address"
					},
					{
						"indexed": true,
						"internalType": "address",
						"name": "newOwner",
						"type": "address"
					}
				],
				"name": "OwnershipTransferred",
				"type": "event"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": true,
						"internalType": "address",
						"name": "from",
						"type": "address"
					},
					{
						"indexed": true,
						"internalType": "address",
						"name": "to",
						"type": "address"
					},
					{
						"indexed": true,
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					}
				],
				"name": "Transfer",
				"type": "event"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "to",
						"type": "address"
					},
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					}
				],
				"name": "approve",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "owner",
						"type": "address"
					}
				],
				"name": "balanceOf",
				"outputs": [
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					}
				],
				"name": "getApproved",
				"outputs": [
					{
						"internalType": "address",
						"name": "",
						"type": "address"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "owner",
						"type": "address"
					},
					{
						"internalType": "address",
						"name": "operator",
						"type": "address"
					}
				],
				"name": "isApprovedForAll",
				"outputs": [
					{
						"internalType": "bool",
						"name": "",
						"type": "bool"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "recipient",
						"type": "address"
					},
					{
						"internalType": "string",
						"name": "tokenURI",
						"type": "string"
					}
				],
				"name": "mint",
				"outputs": [
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					}
				],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [],
				"name": "name",
				"outputs": [
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [],
				"name": "owner",
				"outputs": [
					{
						"internalType": "address",
						"name": "",
						"type": "address"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					}
				],
				"name": "ownerOf",
				"outputs": [
					{
						"internalType": "address",
						"name": "",
						"type": "address"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [],
				"name": "renounceOwnership",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "from",
						"type": "address"
					},
					{
						"internalType": "address",
						"name": "to",
						"type": "address"
					},
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					}
				],
				"name": "safeTransferFrom",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "from",
						"type": "address"
					},
					{
						"internalType": "address",
						"name": "to",
						"type": "address"
					},
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					},
					{
						"internalType": "bytes",
						"name": "data",
						"type": "bytes"
					}
				],
				"name": "safeTransferFrom",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "operator",
						"type": "address"
					},
					{
						"internalType": "bool",
						"name": "approved",
						"type": "bool"
					}
				],
				"name": "setApprovalForAll",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "bytes4",
						"name": "interfaceId",
						"type": "bytes4"
					}
				],
				"name": "supportsInterface",
				"outputs": [
					{
						"internalType": "bool",
						"name": "",
						"type": "bool"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [],
				"name": "symbol",
				"outputs": [
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					}
				],
				"name": "tokenURI",
				"outputs": [
					{
						"internalType": "string",
						"name": "",
						"type": "string"
					}
				],
				"stateMutability": "view",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "from",
						"type": "address"
					},
					{
						"internalType": "address",
						"name": "to",
						"type": "address"
					},
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					}
				],
				"name": "transferFrom",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "newOwner",
						"type": "address"
					}
				],
				"name": "transferOwnership",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			}
		];

		const MARKETPLACE_ABI = [
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": true,
						"internalType": "uint256",
						"name": "listingId",
						"type": "uint256"
					}
				],
				"name": "Canceled",
				"type": "event"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": true,
						"internalType": "uint256",
						"name": "listingId",
						"type": "uint256"
					},
					{
						"indexed": true,
						"internalType": "address",
						"name": "seller",
						"type": "address"
					},
					{
						"indexed": true,
						"internalType": "address",
						"name": "nftAddress",
						"type": "address"
					},
					{
						"indexed": false,
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					},
					{
						"indexed": false,
						"internalType": "uint256",
						"name": "price",
						"type": "uint256"
					}
				],
				"name": "Listed",
				"type": "event"
			},
			{
				"anonymous": false,
				"inputs": [
					{
						"indexed": true,
						"internalType": "uint256",
						"name": "listingId",
						"type": "uint256"
					},
					{
						"indexed": true,
						"internalType": "address",
						"name": "seller",
						"type": "address"
					},
					{
						"indexed": true,
						"internalType": "address",
						"name": "buyer",
						"type": "address"
					},
					{
						"indexed": false,
						"internalType": "address",
						"name": "nftAddress",
						"type": "address"
					},
					{
						"indexed": false,
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					},
					{
						"indexed": false,
						"internalType": "uint256",
						"name": "price",
						"type": "uint256"
					}
				],
				"name": "Sale",
				"type": "event"
			},
			{
				"inputs": [
					{
						"internalType": "uint256",
						"name": "listingId",
						"type": "uint256"
					}
				],
				"name": "buyItem",
				"outputs": [],
				"stateMutability": "payable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "uint256",
						"name": "listingId",
						"type": "uint256"
					}
				],
				"name": "cancelListing",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "address",
						"name": "nftAddress",
						"type": "address"
					},
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "price",
						"type": "uint256"
					}
				],
				"name": "listItem",
				"outputs": [],
				"stateMutability": "nonpayable",
				"type": "function"
			},
			{
				"inputs": [
					{
						"internalType": "uint256",
						"name": "",
						"type": "uint256"
					}
				],
				"name": "listings",
				"outputs": [
					{
						"internalType": "address",
						"name": "seller",
						"type": "address"
					},
					{
						"internalType": "address",
						"name": "nftAddress",
						"type": "address"
					},
					{
						"internalType": "uint256",
						"name": "tokenId",
						"type": "uint256"
					},
					{
						"internalType": "uint256",
						"name": "price",
						"type": "uint256"
					},
					{
						"internalType": "bool",
						"name": "active",
						"type": "bool"
					}
				],
				"stateMutability": "view",
				"type": "function"
			}
		];

		// DOM Elements
		const connectBtn = document.getElementById('connectBtn');
		const accountInfo = document.getElementById('accountInfo');
		const accountDisplay = document.getElementById('accountDisplay');
		const mainApp = document.getElementById('mainApp');
		const accessRequired = document.getElementById('accessRequired');
		const promptInput = document.getElementById('promptInput');
		const generateBtn = document.getElementById('generateBtn');
		const loadingSpinner = document.getElementById('loadingSpinner');
		const loadingMessage = document.getElementById('loadingMessage');
		const generatedImage = document.getElementById('generatedImage');
		const placeholderText = document.getElementById('placeholderText');
		const mintingSection = document.getElementById('mintingSection');
		const priceInput = document.getElementById('priceInput');
		const mintBtn = document.getElementById('mintBtn');
		const messageBox = document.getElementById('messageBox');
		const messageText = document.getElementById('messageText');

		// App State
		let account = null;
		let provider = null;
		let signer = null;
		let tokenUriForMinting = null;

		// Utility Functions
		function showMessage(message, isError = false) {
			messageText.textContent = message;
			messageBox.classList.remove('hidden');

			if (isError) {
				messageBox.querySelector('.message-box').classList.add('message-error');
			} else {
				messageBox.querySelector('.message-box').classList.remove('message-error');
			}

			// Auto hide after 5 seconds
			setTimeout(() => {
				messageBox.classList.add('hidden');
			}, 5000);
		}

		function setLoading(isLoading, message = '') {
			if (isLoading) {
				loadingSpinner.classList.remove('hidden');
				loadingMessage.textContent = message;
				placeholderText.classList.add('hidden');
				generatedImage.classList.add('hidden');
				generateBtn.disabled = true;
				mintBtn.disabled = true;
			} else {
				loadingSpinner.classList.add('hidden');
				generateBtn.disabled = false;
				mintBtn.disabled = false;
			}
		}

		function resetImageState() {
			generatedImage.classList.add('hidden');
			placeholderText.classList.remove('hidden');
			mintingSection.classList.add('hidden');
			tokenUriForMinting = null;
		}

		// Wallet Connection
		async function connectWallet() {
			if (typeof window.ethereum === 'undefined') {
				showMessage('MetaMask is not installed. Please install MetaMask to continue.', true);
				return;
			}

			try {
				setLoading(true, 'Connecting wallet...');

				provider = new ethers.providers.Web3Provider(window.ethereum);
				await provider.send("eth_requestAccounts", []);
				signer = provider.getSigner();
				account = await signer.getAddress();

				// Update UI
				connectBtn.classList.add('hidden');
				accountInfo.classList.remove('hidden');
				accountDisplay.textContent = `${account.substring(0, 6)}...${account.substring(account.length - 4)}`;
				mainApp.classList.remove('hidden');
				accessRequired.classList.add('hidden');

				showMessage('Wallet connected successfully! ðŸŽ‰');
			} catch (error) {
				console.error('Wallet connection error:', error);
				showMessage('Failed to connect wallet. Please try again.', true);
			} finally {
				setLoading(false);
			}
		}

		// Image Generation
		async function generateImage() {
			const prompt = promptInput.value.trim();
			if (!prompt) {
				showMessage('Please enter a description for your AI artwork.', true);
				return;
			}

			setLoading(true, 'Generating AI image & uploading to IPFS...');
			resetImageState();

			try {
				// Simulate API call for demo purposes
				// In production, replace with actual API endpoint
				const response = await fetch('http://localhost:4000/api/generate', {
					method: 'POST',
					headers: { 'Content-Type': 'application/json' },
					body: JSON.stringify({ prompt }),
				});

				if (!response.ok) {
					throw new Error('Failed to generate image');
				}

				const data = await response.json();

				if (data.imageUrl && data.tokenUri) {
					tokenUriForMinting = data.tokenUri;
					generatedImage.src = data.imageUrl;
					generatedImage.classList.remove('hidden');
					mintingSection.classList.remove('hidden');
					showMessage('âœ¨ AI artwork created and uploaded to IPFS! Ready to mint.');
				} else {
					throw new Error('Invalid response from generation service');
				}
			} catch (error) {
				console.error('Image generation error:', error);
				showMessage('Failed to generate image. Please ensure the backend service is running.', true);
				placeholderText.classList.remove('hidden');
			} finally {
				setLoading(false);
			}
		}

		// NFT Minting and Listing
		async function mintAndListNFT() {
			if (!tokenUriForMinting) {
				showMessage('Please generate an image first.', true);
				return;
			}

			const price = parseFloat(priceInput.value);
			if (!price || price <= 0) {
				showMessage('Please enter a valid listing price greater than 0.', true);
				return;
			}

			setLoading(true, 'Starting transaction...');

			try {
				const aiNftContract = new ethers.Contract(AINFT_ADDRESS, AINFT_ABI, signer);
				const marketplaceContract = new ethers.Contract(MARKETPLACE_ADDRESS, MARKETPLACE_ABI, signer);

				// Step 1: Mint NFT
				setLoading(true, '1/3: Minting NFT with IPFS URI...');
				const mintTx = await aiNftContract.mint(account, tokenUriForMinting);
				const receipt = await mintTx.wait();

				// Get token ID from mint event
				const event = receipt.events?.filter((e) => e.event === 'Minted')[0];
				if (!event) {
					throw new Error('Could not get Token ID from mint event.');
				}
				const tokenId = event.args.tokenId;

				// Step 2: Approve marketplace
				setLoading(true, `2/3: Approving Marketplace for Token ID: ${tokenId}...`);
				const approvalTx = await aiNftContract.approve(MARKETPLACE_ADDRESS, tokenId);
				await approvalTx.wait();

				// Step 3: List on marketplace
				setLoading(true, '3/3: Listing on Marketplace...');
				const priceInWei = ethers.utils.parseEther(price.toString());
				const listingTx = await marketplaceContract.listItem(AINFT_ADDRESS, tokenId, priceInWei);
				await listingTx.wait();

				// Reset form
				promptInput.value = '';
				priceInput.value = '';
				resetImageState();

				showMessage('ðŸŽ‰ NFT successfully minted and listed on the marketplace!');
			} catch (error) {
				console.error('Mint/List Error:', error);
				const errorMessage = error.reason || error.data?.message || error.message || 'Transaction failed';
				showMessage(`Transaction failed: ${errorMessage}`, true);
			} finally {
				setLoading(false);
			}
		}

		// Event Listeners
		connectBtn.addEventListener('click', connectWallet);
		generateBtn.addEventListener('click', generateImage);
		mintBtn.addEventListener('click', mintAndListNFT);

		// Handle account changes
		if (window.ethereum) {
			window.ethereum.on('accountsChanged', (accounts) => {
				if (accounts.length === 0) {
					// User disconnected
					location.reload();
				} else if (accounts[0] !== account) {
					// User switched accounts
					location.reload();
				}
			});
		}

		// Initialize app
		document.addEventListener('DOMContentLoaded', () => {
			// Check if wallet is already connected
			if (window.ethereum) {
				window.ethereum.request({ method: 'eth_accounts' })
					.then(accounts => {
						if (accounts.length > 0) {
							connectWallet();
						}
					});
			}
		});
	</script>
</body>

</html>
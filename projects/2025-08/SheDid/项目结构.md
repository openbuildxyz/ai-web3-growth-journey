# 项目结构设计

## 目录结构
```
decentralized-proposal-platform/
├── public/
│   ├── index.html
│   └── favicon.ico
├── src/
│   ├── components/           # React组件
│   │   ├── common/          # 通用组件
│   │   │   ├── Header.jsx
│   │   │   ├── Loading.jsx
│   │   │   ├── Modal.jsx
│   │   │   └── ConnectWallet.jsx
│   │   ├── wallet/          # 钱包相关组件
│   │   │   ├── WalletButton.jsx
│   │   │   ├── WalletInfo.jsx
│   │   │   ├── NetworkSwitch.jsx
│   │   │   └── WalletModal.jsx
│   │   ├── proposal/        # 提案相关组件
│   │   │   ├── ProposalCard.jsx
│   │   │   ├── ProposalForm.jsx
│   │   │   ├── ProposalDetail.jsx
│   │   │   └── VoteButton.jsx
│   │   └── layout/          # 布局组件
│   │       ├── Layout.jsx
│   │       └── Sidebar.jsx
│   ├── pages/               # 页面组件
│   │   ├── Home.jsx         # 首页/广场
│   │   ├── Create.jsx       # 创建提案
│   │   ├── Proposal.jsx     # 提案详情
│   │   └── Profile.jsx      # 用户页面
│   ├── hooks/               # 自定义Hooks
│   │   ├── useWeb3.js       # Web3连接
│   │   ├── useIPFS.js       # IPFS操作
│   │   ├── useProposals.js  # 提案管理
│   │   └── useVoting.js     # 投票功能
│   ├── services/            # 服务层
│   │   ├── ipfs.js          # IPFS服务
│   │   ├── ai.js            # AI校验服务
│   │   ├── blockchain.js    # 区块链交互
│   │   └── storage.js       # 本地存储
│   ├── utils/               # 工具函数
│   │   ├── constants.js     # 常量定义
│   │   ├── helpers.js       # 辅助函数
│   │   └── validation.js    # 验证函数
│   ├── context/             # React Context
│   │   ├── Web3Context.jsx  # Web3状态管理
│   │   └── ProposalContext.jsx # 提案状态管理
│   ├── styles/              # 样式文件
│   │   ├── globals.css      # 全局样式
│   │   └── components.css   # 组件样式
│   ├── contracts/           # 智能合约
│   │   ├── abi/            # 合约ABI
│   │   └── addresses.js    # 合约地址
│   ├── App.jsx             # 主应用组件
│   └── main.jsx            # 应用入口
├── contracts/               # 智能合约源码
│   ├── ProposalVoting.sol  # 投票合约
│   └── deploy.js           # 部署脚本
├── package.json
├── vite.config.js
├── tailwind.config.js
└── README.md
```

## 核心文件说明

### 1. 主要组件

#### `src/App.jsx`
- 应用主入口
- 路由配置
- 全局状态提供者

#### `src/pages/Home.jsx`
- 提案广场页面
- 展示所有提案列表
- 筛选和排序功能

#### `src/pages/Create.jsx`
- 创建提案页面
- 表单验证
- AI校验集成

#### `src/components/proposal/ProposalCard.jsx`
- 提案卡片组件
- 显示提案摘要信息
- 投票按钮集成

### 2. 服务层

#### `src/services/ipfs.js`
```javascript
// IPFS服务接口
export const uploadToIPFS = async (content) => {}
export const getFromIPFS = async (hash) => {}
export const pinContent = async (hash) => {}
```

#### `src/services/ai.js`
```javascript
// AI校验服务
export const verifyContent = async (content) => {}
export const getContentScore = async (content) => {}
```

#### `src/services/blockchain.js`
```javascript
// 区块链交互
export const submitVote = async (proposalId, vote) => {}
export const deployToChain = async (proposalData) => {}
export const getVotingResults = async (proposalId) => {}
```

### 3. 状态管理

#### `src/context/ProposalContext.jsx`
- 提案列表状态
- 投票状态管理
- IPFS操作状态

#### `src/context/Web3Context.jsx`
- 钱包连接状态
- 用户账户信息
- 网络状态

### 4. 自定义Hooks

#### `src/hooks/useProposals.js`
- 提案CRUD操作
- 本地缓存管理
- IPFS同步

#### `src/hooks/useVoting.js`
- 投票逻辑
- 投票状态跟踪
- 结果计算

#### `src/hooks/useWeb3.js`
- 钱包连接管理
- 账户状态监听
- 网络切换处理
- 交易签名

## 开发流程

### 第一阶段：基础搭建 (30分钟)
1. 创建Vite + React项目
2. 配置Tailwind CSS
3. 设置基础路由和布局
4. 集成钱包连接功能
5. 创建核心组件骨架

### 第二阶段：IPFS集成 (45分钟)
1. 集成IPFS客户端
2. 实现内容上传功能
3. 实现内容读取功能
4. 添加错误处理

### 第三阶段：AI校验 (30分钟)
1. 集成AI校验API
2. 实现内容过滤逻辑
3. 添加校验结果显示

### 第四阶段：投票系统 (90分钟)
1. 创建投票智能合约
2. 实现前端投票界面
3. 集成Web3连接
4. 实现投票结果统计

### 第五阶段：上链功能 (45分钟)
1. 实现上链触发逻辑
2. 添加交易状态跟踪
3. 完善用户反馈

## 技术选型理由

### React + Vite
- 快速开发和热重载
- 丰富的生态系统
- 适合快速原型开发

### Tailwind CSS
- 快速UI开发
- 响应式设计支持
- 减少CSS编写时间

### IPFS
- 去中心化存储
- 内容寻址
- 适合区块链项目

### wagmi + RainbowKit
- 现代化的React Hooks for Ethereum
- 开箱即用的钱包连接UI
- 优秀的TypeScript支持
- 自动处理钱包状态管理

## 部署策略

### 开发环境
- 本地IPFS节点
- Hardhat本地网络
- 开发服务器

### 演示环境
- Vercel/Netlify部署前端
- Infura IPFS服务
- Sepolia测试网

这个结构设计考虑了时间限制，优先实现核心功能，同时保持代码的可维护性和扩展性。

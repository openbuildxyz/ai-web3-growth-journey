{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 40, "column": 0}, "map": {"version":3,"sources":["file:///Users/morganpage/Documents/VSCODE/X402/x402/examples/typescript/fullstack/next/proxy.ts"],"sourcesContent":["import { paymentProxy } from \"@x402/next\";\nimport { x402ResourceServer, HTTPFacilitatorClient } from \"@x402/core/server\";\nimport { registerExactEvmScheme } from \"@x402/evm/exact/server\";\nimport { registerExactSvmScheme } from \"@x402/svm/exact/server\";\nimport { createPaywall } from \"@x402/paywall\";\nimport { evmPaywall } from \"@x402/paywall/evm\";\nimport { svmPaywall } from \"@x402/paywall/svm\";\nimport { declareDiscoveryExtension } from \"@x402/extensions/bazaar\";\n\nconst facilitatorUrl = process.env.FACILITATOR_URL;\nexport const evmAddress = process.env.EVM_ADDRESS as `0x${string}`;\nexport const svmAddress = process.env.SVM_ADDRESS;\n\nif (!facilitatorUrl) {\n  console.error(\"❌ FACILITATOR_URL environment variable is required\");\n  process.exit(1);\n}\n\nif (!evmAddress || !svmAddress) {\n  console.error(\"❌ EVM_ADDRESS and SVM_ADDRESS environment variables are required\");\n  process.exit(1);\n}\n\n// Create HTTP facilitator client\nconst facilitatorClient = new HTTPFacilitatorClient({ url: facilitatorUrl });\n\n// Create x402 resource server\nexport const server = new x402ResourceServer(facilitatorClient);\n\n// Register schemes\nregisterExactEvmScheme(server);\nregisterExactSvmScheme(server);\n\n// Build paywall\nexport const paywall = createPaywall()\n  .withNetwork(evmPaywall)\n  .withNetwork(svmPaywall)\n  .withConfig({\n    appName: process.env.APP_NAME || \"Next x402 Demo\",\n    appLogo: process.env.APP_LOGO || \"/x402-icon-blue.png\",\n    testnet: true,\n  })\n  .build();\n\n// Build proxy\nexport const proxy = paymentProxy(\n  {\n    \"/protected\": {\n      accepts: [\n        {\n          scheme: \"exact\",\n          price: \"$0.001\",\n          network: \"eip155:84532\", // base-sepolia\n          payTo: evmAddress,\n        },\n        {\n          scheme: \"exact\",\n          price: \"$0.001\",\n          network: \"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1\", // solana devnet\n          payTo: svmAddress,\n        },\n      ],\n      description: \"Premium music: x402 Remix\",\n      mimeType: \"text/html\",\n      extensions: {\n        ...declareDiscoveryExtension({}),\n      },\n    },\n  },\n  server,\n  undefined, // paywallConfig (using custom paywall instead)\n  paywall, // custom paywall provider\n);\n\n// Configure which paths the proxy should run on\nexport const config = {\n  matcher: [\"/protected/:path*\"],\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AASA,MAAM,iBAAiB,QAAQ,GAAG,CAAC,eAAe;AAC3C,MAAM,aAAa,QAAQ,GAAG,CAAC,WAAW;AAC1C,MAAM,aAAa,QAAQ,GAAG,CAAC,WAAW;AAEjD,IAAI,CAAC,gBAAgB;IACnB,QAAQ,KAAK,CAAC;IACd,QAAQ,IAAI,CAAC;AACf;AAEA,IAAI,CAAC,cAAc,CAAC,YAAY;IAC9B,QAAQ,KAAK,CAAC;IACd,QAAQ,IAAI,CAAC;AACf;AAEA,iCAAiC;AACjC,MAAM,oBAAoB,IAAI,sBAAsB;IAAE,KAAK;AAAe;AAGnE,MAAM,SAAS,IAAI,mBAAmB;AAE7C,mBAAmB;AACnB,uBAAuB;AACvB,uBAAuB;AAGhB,MAAM,UAAU,gBACpB,WAAW,CAAC,YACZ,WAAW,CAAC,YACZ,UAAU,CAAC;IACV,SAAS,QAAQ,GAAG,CAAC,QAAQ,IAAI;IACjC,SAAS,QAAQ,GAAG,CAAC,QAAQ,IAAI;IACjC,SAAS;AACX,GACC,KAAK;AAGD,MAAM,QAAQ,aACnB;IACE,cAAc;QACZ,SAAS;YACP;gBACE,QAAQ;gBACR,OAAO;gBACP,SAAS;gBACT,OAAO;YACT;YACA;gBACE,QAAQ;gBACR,OAAO;gBACP,SAAS;gBACT,OAAO;YACT;SACD;QACD,aAAa;QACb,UAAU;QACV,YAAY;YACV,GAAG,0BAA0B,CAAC,EAAE;QAClC;IACF;AACF,GACA,QACA,WACA;AAIK,MAAM,SAAS;IACpB,SAAS;QAAC;KAAoB;AAChC"}}]
}
{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/morganpage/Documents/VSCODE/X402/x402/examples/typescript/fullstack/next/proxy.ts"],"sourcesContent":["import { paymentProxy } from \"@x402/next\";\nimport { x402ResourceServer, HTTPFacilitatorClient } from \"@x402/core/server\";\nimport { registerExactEvmScheme } from \"@x402/evm/exact/server\";\nimport { registerExactSvmScheme } from \"@x402/svm/exact/server\";\nimport { createPaywall } from \"@x402/paywall\";\nimport { evmPaywall } from \"@x402/paywall/evm\";\nimport { svmPaywall } from \"@x402/paywall/svm\";\nimport { declareDiscoveryExtension } from \"@x402/extensions/bazaar\";\n\nconst facilitatorUrl = process.env.FACILITATOR_URL;\nexport const evmAddress = process.env.EVM_ADDRESS as `0x${string}`;\nexport const svmAddress = process.env.SVM_ADDRESS;\n\nif (!facilitatorUrl) {\n  console.error(\"❌ FACILITATOR_URL environment variable is required\");\n  process.exit(1);\n}\n\nif (!evmAddress || !svmAddress) {\n  console.error(\"❌ EVM_ADDRESS and SVM_ADDRESS environment variables are required\");\n  process.exit(1);\n}\n\n// Create HTTP facilitator client\nconst facilitatorClient = new HTTPFacilitatorClient({ url: facilitatorUrl });\n\n// Create x402 resource server\nexport const server = new x402ResourceServer(facilitatorClient);\n\n// Register schemes\nregisterExactEvmScheme(server);\nregisterExactSvmScheme(server);\n\n// Build paywall\nexport const paywall = createPaywall()\n  .withNetwork(evmPaywall)\n  .withNetwork(svmPaywall)\n  .withConfig({\n    appName: process.env.APP_NAME || \"Next x402 Demo\",\n    appLogo: process.env.APP_LOGO || \"/x402-icon-blue.png\",\n    testnet: true,\n  })\n  .build();\n\n// Build proxy\nexport const proxy = paymentProxy(\n  {\n    \"/protected\": {\n      accepts: [\n        {\n          scheme: \"exact\",\n          price: \"$0.001\",\n          network: \"eip155:84532\", // base-sepolia\n          payTo: evmAddress,\n        },\n        {\n          scheme: \"exact\",\n          price: \"$0.001\",\n          network: \"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1\", // solana devnet\n          payTo: svmAddress,\n        },\n      ],\n      description: \"Premium music: x402 Remix\",\n      mimeType: \"text/html\",\n      extensions: {\n        ...declareDiscoveryExtension({}),\n      },\n    },\n  },\n  server,\n  undefined, // paywallConfig (using custom paywall instead)\n  paywall, // custom paywall provider\n);\n\n// Configure which paths the proxy should run on\nexport const config = {\n  matcher: [\"/protected/:path*\"],\n};\n"],"names":[],"mappings":";;;;;;;;;;;;;;AAAA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;AAEA,MAAM,iBAAiB,QAAQ,GAAG,CAAC,eAAe;AAC3C,MAAM,aAAa,QAAQ,GAAG,CAAC,WAAW;AAC1C,MAAM,aAAa,QAAQ,GAAG,CAAC,WAAW;AAEjD,IAAI,CAAC,gBAAgB;IACnB,QAAQ,KAAK,CAAC;IACd,QAAQ,IAAI,CAAC;AACf;AAEA,IAAI,CAAC,cAAc,CAAC,YAAY;IAC9B,QAAQ,KAAK,CAAC;IACd,QAAQ,IAAI,CAAC;AACf;AAEA,iCAAiC;AACjC,MAAM,oBAAoB,IAAI,8LAAqB,CAAC;IAAE,KAAK;AAAe;AAGnE,MAAM,SAAS,IAAI,yMAAkB,CAAC;AAE7C,mBAAmB;AACnB,IAAA,mNAAsB,EAAC;AACvB,IAAA,mNAAsB,EAAC;AAGhB,MAAM,UAAU,IAAA,oLAAa,IACjC,WAAW,CAAC,wLAAU,EACtB,WAAW,CAAC,wLAAU,EACtB,UAAU,CAAC;IACV,SAAS,QAAQ,GAAG,CAAC,QAAQ,IAAI;IACjC,SAAS,QAAQ,GAAG,CAAC,QAAQ,IAAI;IACjC,SAAS;AACX,GACC,KAAK;AAGD,MAAM,QAAQ,IAAA,gMAAY,EAC/B;IACE,cAAc;QACZ,SAAS;YACP;gBACE,QAAQ;gBACR,OAAO;gBACP,SAAS;gBACT,OAAO;YACT;YACA;gBACE,QAAQ;gBACR,OAAO;gBACP,SAAS;gBACT,OAAO;YACT;SACD;QACD,aAAa;QACb,UAAU;QACV,YAAY;YACV,GAAG,IAAA,wMAAyB,EAAC,CAAC,EAAE;QAClC;IACF;AACF,GACA,QACA,WACA;AAIK,MAAM,SAAS;IACpB,SAAS;QAAC;KAAoB;AAChC"}},
    {"offset": {"line": 92, "column": 0}, "map": {"version":3,"sources":["file:///Users/morganpage/Documents/VSCODE/X402/x402/examples/typescript/fullstack/next/app/api/weather/route.ts"],"sourcesContent":["import { NextRequest, NextResponse } from \"next/server\";\nimport { withX402 } from \"@x402/next\";\nimport { declareDiscoveryExtension } from \"@x402/extensions/bazaar\";\nimport { server, paywall, evmAddress, svmAddress } from \"../../../proxy\";\n\n/**\n * Weather API endpoint handler\n *\n * This handler returns weather data after payment verification.\n * Payment is only settled after a successful response (status < 400).\n *\n * @param _ - Incoming Next.js request\n * @returns JSON response with weather data\n */\nconst handler = async (_: NextRequest) => {\n  return NextResponse.json(\n    {\n      report: {\n        weather: \"sunny\",\n        temperature: 72,\n      },\n    },\n    { status: 200 },\n  );\n};\n\n/**\n * Protected weather API endpoint using withX402 wrapper\n *\n * This demonstrates the v2 withX402 wrapper for individual API routes.\n * Unlike middleware, withX402 guarantees payment settlement only after\n * the handler returns a successful response (status < 400).\n */\nexport const GET = withX402(\n  handler,\n  {\n    accepts: [\n      {\n        scheme: \"exact\",\n        price: \"$0.001\",\n        network: \"eip155:84532\", // base-sepolia\n        payTo: evmAddress,\n      },\n      {\n        scheme: \"exact\",\n        price: \"$0.001\",\n        network: \"solana:EtWTRABZaYq6iMfeYKouRu166VU2xqa1\", // solana devnet\n        payTo: svmAddress,\n      },\n    ],\n    description: \"Access to weather API\",\n    mimeType: \"application/json\",\n    extensions: {\n      ...declareDiscoveryExtension({\n        output: {\n          example: {\n            report: {\n              weather: \"sunny\",\n              temperature: 72,\n            },\n          },\n        },\n      }),\n    },\n  },\n  server,\n  undefined, // paywallConfig (using custom paywall from proxy.ts)\n  paywall,\n);\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;AAAA;AACA;;;;;AAEA;;;;;;;;CAQC,GACD,MAAM,UAAU,OAAO;IACrB,OAAO,4UAAY,CAAC,IAAI,CACtB;QACE,QAAQ;YACN,SAAS;YACT,aAAa;QACf;IACF,GACA;QAAE,QAAQ;IAAI;AAElB;AASO,MAAM,MAAM,IAAA,4LAAQ,EACzB,SACA;IACE,SAAS;QACP;YACE,QAAQ;YACR,OAAO;YACP,SAAS;YACT,OAAO,oKAAU;QACnB;QACA;YACE,QAAQ;YACR,OAAO;YACP,SAAS;YACT,OAAO,oKAAU;QACnB;KACD;IACD,aAAa;IACb,UAAU;IACV,YAAY;QACV,GAAG,IAAA,wMAAyB,EAAC;YAC3B,QAAQ;gBACN,SAAS;oBACP,QAAQ;wBACN,SAAS;wBACT,aAAa;oBACf;gBACF;YACF;QACF,EAAE;IACJ;AACF,GACA,gKAAM,EACN,WACA,iKAAO"}}]
}